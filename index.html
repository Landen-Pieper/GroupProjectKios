<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CAT Building Kiosk</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }

    /* Full-page background for the Departments & History section */
    body.history-page {
      margin: 0;
      background-image: url("backgroundColor.png");
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      min-height: 100vh;
      color: #000000;
    }

    h1 {
      text-align: center;
      color: #333;
    }

    .tabs, .subtabs {
      display: flex;
      justify-content: center;
      margin: 20px 0;
    }

    .tab, .subtab {
      margin: 0 10px;
      padding: 10px 20px;
      cursor: pointer;
      border: 1px solid black;
      border-radius: 5px;
    }

    .tab.active, .subtab.active {
      background-color: black;
      color: #fff;
    }

    .tab-content, .subtab-content {
      display: none;
      margin-top: 20px;
      text-align: center;
    }

    .tab-content.active, .subtab-content.active {
      display: block;
      text-align: left;
    }

    .tab-content#events.active {
      display: flex;
      flex-direction: column;
      align-items: stretch;
    }

    .event-item {
      border: 1px solid #ccc;
      padding: 15px;
      margin-bottom: 10px;
      border-radius: 5px;
      background-color: #f9f9f9;
    }

    .event-item h3 {
      margin-top: 0;
      margin-bottom: 5px;
      font-size: 1.2em;
    }

    .event-item p {
      margin-bottom: 5px;
      font-size: 0.95em;
    }

    .event-item .date {
      font-style: italic;
      color: #555;
    }

    /* History section styles */
    .tab-content#departments.active {
      text-align: left;
      background-color: transparent;
      padding: 20px;
    }

    .tab-content#departments.active h2 {
      margin-bottom: 15px;
      font-size: 1.8em;
      border-bottom: 2px solid rgba(0, 0, 0, 0.5);
      padding-bottom: 10px;
      text-align: center;
      color: #000000;
    }

    .tab-content#departments.active p {
      line-height: 1.6;
      margin-bottom: 15px;
      font-size: 1em;
      text-indent: 2em;
      color: #000000;
    }
  </style>
</head>
<body>
  <h1>CAT Building Kiosk</h1>
  <div class="tabs">
    <div class="tab active" data-target="navigation">Navigation</div>
    <div class="tab" data-target="events">Scheduled Events</div>
    <div class="tab" data-target="schedule">Room Utilization Schedule</div>
    <div class="tab" data-target="departments">Departments & History</div>
  </div>

  <div class="tab-content active" id="navigation">
    <h2>Building Navigation</h2>
  </div>

  <div class="tab-content" id="events">
    <h2>Scheduled Events</h2>
    <div id="events-list">
      <p>Loading events...</p>
    </div>
  </div>

  <div class="tab-content" id="schedule">
    <h2>Room Utilization Schedule</h2>
    <p>View the schedule for room usage here.</p>
  </div>

  <div class="tab-content" id="departments">
    <h2>History</h2>
    <p>Details about the CAT Building...</p>
  </div>

  <script>
    const tabs = document.querySelectorAll('.tab');
    const tabContents = document.querySelectorAll('.tab-content');
    const body = document.body;
    const eventsListContainer = document.getElementById('events-list');

    tabs.forEach(tab => {
      tab.addEventListener('click', () => {
        tabs.forEach(t => t.classList.remove('active'));
        tabContents.forEach(content => content.classList.remove('active'));

        tab.classList.add('active');
        const targetId = tab.dataset.target;
        document.getElementById(targetId).classList.add('active');

        if (targetId === 'events') {
          loadEvents();
        }

        if (targetId === 'departments') {
          body.classList.add('history-page');
        } else {
          body.classList.remove('history-page');
        }
      });
    });

    // Function to load events from event.json
    async function loadEvents() {
      try {
        const response = await fetch('event.json'); // Ensure event.json is in the same directory
        const events = await response.json();
        
        eventsListContainer.innerHTML = ''; // Clear loading message

        if (events.length === 0) {
          eventsListContainer.innerHTML = '<p>No events found.</p>';
          return;
        }

        events.forEach(event => {
          const eventItem = document.createElement('div');
          eventItem.classList.add('event-item');
          eventItem.innerHTML = `
            <h3>${event.title}</h3>
            <p class="date">Date: ${event.date}</p>
            <p>Time: ${event.time}</p>
            <p>Location: ${event.location}</p>
            <p>${event.description}</p>
          `;
          eventsListContainer.appendChild(eventItem);
        });
      } catch (error) {
        console.error('Error fetching events:', error);
        eventsListContainer.innerHTML = '<p>Failed to load events.</p>';
      }
    }

    document.addEventListener('DOMContentLoaded', loadEvents);
  </script>
</body>
</html>
